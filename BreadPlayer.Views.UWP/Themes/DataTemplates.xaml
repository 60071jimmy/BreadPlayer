<ResourceDictionary
    x:Class="BreadPlayer.Themes.DataTemplates"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Behaviours="using:BreadPlayer.Behaviours"
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:Extensions="using:BreadPlayer.Extensions"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:Media="using:Microsoft.Xaml.Interactions.Media"
    xmlns:local="using:BreadPlayer.Themes"
    xmlns:models="using:BreadPlayer.Core.Models">

    <Extensions:BindableFlyout
        x:Key="PlaylistsFlyout"
        ItemsSource="{Binding Source={StaticResource Core}, Path=OptionItems}"
        Placement="Right" />

    <MenuFlyout x:Key="AlbumArtistFlyout">
        <Extensions:MenuFlyoutIconItem
            Command="{Binding Path=PlayCommand}"
            CommandParameter="{Binding ElementName=ContentPresenter, Path=Content}"
            DataContext="{StaticResource LibVM}"
            Glyph="&#xE768;"
            Text="Play" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}"
            CommandParameter="{Binding ElementName=ContentPresenter, Path=Content}"
            Glyph="&#xE77B;"
            Text="Show Artist"
            Visibility="{Binding Converter={StaticResource RecordTypeToVisibility}, ConverterParameter='Album'}" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding Path=PlayCommand}"
            CommandParameter="{Binding ElementName=ContentPresenter, Path=Content}"
            DataContext="{StaticResource LibVM}"
            Glyph="&#xE718;"
            Text="Pin to Start" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding Source={StaticResource LibVM}, Path=DeleteCommand}"
            CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}}"
            Glyph="&#xE74D;"
            Text="Delete" />
    </MenuFlyout>

    <MenuFlyout x:Key="Flyout">
        <Extensions:MenuFlyoutIconItem
            x:Name="playMenuItem"
            Command="{Binding Path=PlayCommand}"
            CommandParameter="{Binding ElementName=ContentPresenter, Path=Content}"
            DataContext="{StaticResource LibVM}"
            Glyph="&#xE768;"
            Text="Play" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding OpenSongLocationCommand}"
            CommandParameter="{Binding ElementName=playMenuItem, Path=CommandParameter}"
            DataContext="{Binding Source={StaticResource Core}}"
            Glyph="&#xE8DA;"
            Text="Open Song Location" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding RelocateSongCommand}"
            CommandParameter="{Binding ElementName=playMenuItem, Path=CommandParameter}"
            DataContext="{Binding ElementName=playMenuItem, Path=DataContext}"
            Glyph="&#xE8DE;"
            Text="Relocate Song" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding ChangeAlbumArtCommand}"
            CommandParameter="{Binding ElementName=playMenuItem, Path=CommandParameter}"
            DataContext="{Binding Source={StaticResource Core}}"
            Glyph="&#xEE71;"
            Text="Change Album Art" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding Path=StopAfterCommand}"
            CommandParameter="{Binding ElementName=playMenuItem, Path=CommandParameter}"
            DataContext="{Binding ElementName=playMenuItem, Path=DataContext}"
            Glyph="&#xE81A;"
            Text="Stop Playing After This Song" />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding Source={StaticResource LibVM}, Path=DeleteCommand}"
            CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}}"
            Glyph="&#xE74D;"
            Text="Delete"
            Visibility="{Binding Path=IsPlaylistSong, Converter={StaticResource TrueToFalse}}" />
        <Extensions:MenuFlyoutIconItem
            x:Uid="deleteFromPlaylistMenuItem"
            Command="{Binding Source={StaticResource PlaylistVM}, Path=DeleteCommand}"
            CommandParameter="{Binding RelativeSource={RelativeSource Mode=Self}}"
            Glyph="&#xE74D;"
            Text=""
            Visibility="{Binding Path=IsPlaylistSong}" />
        <MenuFlyoutSeparator />
        <Extensions:MenuFlyoutIconItem
            Command="{Binding ShowPropertiesCommand}"
            CommandParameter="{Binding ElementName=playMenuItem, Path=CommandParameter}"
            DataContext="{Binding Source={StaticResource Core}}"
            Glyph="&#xE90B;"
            Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"
            Text="Properties" />
    </MenuFlyout>

    <DataTemplate x:Key="AlbumTemplate" x:DataType="models:Album">
        <Grid
            x:Name="LayoutRoot"
            Width="200"
            Height="290"
            Background="White">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Image
                x:Name="AlbumArt"
                Width="200"
                Height="200"
                HorizontalAlignment="Stretch"
                x:Phase="2"
                Opacity="0"
                Source="{x:Bind AlbumArt, Converter={StaticResource PathToImage}}"
                Stretch="Uniform">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="ImageOpened">
                        <Media:ControlStoryboardAction>
                            <Media:ControlStoryboardAction.Storyboard>
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="AlbumArt"
                                        Storyboard.TargetProperty="Opacity"
                                        From="0"
                                        To="1"
                                        Duration="0:0:0.8" />
                                </Storyboard>
                            </Media:ControlStoryboardAction.Storyboard>
                        </Media:ControlStoryboardAction>
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Image>
            <FontIcon
                x:Name="PlaceHolder"
                Width="200"
                Height="200"
                x:Phase="2"
                FontSize="112"
                Foreground="{ThemeResource ThemeForeground}"
                Glyph="&#xE93C;"
                Visibility="{x:Bind Path=AlbumArt, Converter={StaticResource BoolToVisibility}}" />
            <TextBlock
                x:Name="albumTitle"
                Grid.Row="1"
                Margin="5,10,5,0"
                HorizontalAlignment="Center"
                x:Phase="0"
                FontSize="16"
                FontWeight="SemiBold"
                MaxLines="2"
                Text="{x:Bind AlbumName, FallbackValue=25}"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap" />
            <TextBlock
                x:Name="albumArtist"
                Grid.Row="2"
                Margin="5,10,5,0"
                HorizontalAlignment="Center"
                x:Phase="1"
                FontSize="13"
                Text="{x:Bind Artist, FallbackValue=Adele}"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis" />

            <Border
                Grid.RowSpan="4"
                Height="290"
                Background="Transparent"
                ToolTipService.ToolTip="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content.AlbumName}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="RightTapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Holding">
                        <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Border>

            <Grid
                x:Name="ButtonsStack"
                Grid.Row="0"
                Height="46"
                Margin="0,0,0,0"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Bottom"
                Background="{ThemeResource SystemControlHighlightListAccentMediumBrush}"
                Opacity="0"
                Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Button
                    Width="46"
                    Height="46"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Right"
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Style="{StaticResource HyperlinkBtn}">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="20"
                        RequestedTheme="Dark"
                        Text="&#xE102;" />
                </Button>
                <Button
                    x:Name="button2"
                    Grid.Column="1"
                    Width="46"
                    Height="46"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Left"
                    Background="Transparent"
                    BorderThickness="0"
                    Style="{StaticResource HyperlinkBtn}"
                    Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="20"
                        RequestedTheme="Dark"
                        Text="&#59152;" />
                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="Click" SourceObject="{Binding ElementName=button2}">
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource PlaylistsFlyout}" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </Button>
                <Interactivity:Interaction.Behaviors>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="True">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource SystemAccentForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource SystemAccentForeground}" />
                        <Media:ControlStoryboardAction>
                            <Media:ControlStoryboardAction.Storyboard>
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="ButtonsStack"
                                        Storyboard.TargetProperty="Opacity"
                                        From="0"
                                        To="1"
                                        Duration="0:0:0.3" />
                                </Storyboard>
                            </Media:ControlStoryboardAction.Storyboard>
                        </Media:ControlStoryboardAction>
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="False">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Collapsed" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource ThemeForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource ThemeForeground}" />
                    </Core:DataTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Grid>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="AlbumMobileTemplate" x:DataType="models:Album">
        <Grid
            x:Name="LayoutRoot"
            Width="130"
            Height="200"
            Background="White">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Image
                x:Name="AlbumArt"
                Width="130"
                Height="130"
                HorizontalAlignment="Stretch"
                x:Phase="2"
                Opacity="0"
                Source="{x:Bind AlbumArt, Converter={StaticResource PathToImage}}"
                Stretch="Uniform">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="ImageOpened">
                        <Media:ControlStoryboardAction>
                            <Media:ControlStoryboardAction.Storyboard>
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="AlbumArt"
                                        Storyboard.TargetProperty="Opacity"
                                        From="0"
                                        To="1"
                                        Duration="0:0:0.8" />
                                </Storyboard>
                            </Media:ControlStoryboardAction.Storyboard>
                        </Media:ControlStoryboardAction>
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Image>
            <FontIcon
                x:Name="PlaceHolder"
                Width="130"
                Height="130"
                x:Phase="2"
                FontSize="60"
                Foreground="{ThemeResource ThemeForeground}"
                Glyph="&#xE93C;"
                Visibility="{x:Bind Path=AlbumArt, Converter={StaticResource BoolToVisibility}}" />
            <TextBlock
                x:Name="albumTitle"
                Grid.Row="1"
                Margin="5,5,5,0"
                HorizontalAlignment="Center"
                x:Phase="0"
                FontSize="14"
                FontWeight="SemiBold"
                MaxLines="2"
                Text="{x:Bind AlbumName, FallbackValue=25}"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap" />
            <TextBlock
                x:Name="albumArtist"
                Grid.Row="2"
                Margin="5,5,5,0"
                HorizontalAlignment="Center"
                x:Phase="1"
                FontSize="11"
                Text="{x:Bind Artist, FallbackValue=Adele}"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis" />
            <Border
                Grid.RowSpan="4"
                Height="200"
                Background="Transparent"
                ToolTipService.ToolTip="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content.AlbumName}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="RightTapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Holding">
                        <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Border>
            <Grid
                x:Name="ButtonsStack"
                Grid.Row="0"
                Height="40"
                Margin="0,0,0,0"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Bottom"
                Background="{ThemeResource SystemControlHighlightListAccentMediumBrush}"
                Opacity="0"
                Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Button
                    Width="40"
                    Height="40"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Right"
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Style="{StaticResource HyperlinkBtn}">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="17"
                        RequestedTheme="Dark"
                        Text="&#xE102;" />
                </Button>
                <Button
                    x:Name="button2"
                    Grid.Column="1"
                    Width="40"
                    Height="40"
                    Padding="0,0,0,0"
                    HorizontalAlignment="Left"
                    Background="Transparent"
                    BorderThickness="0"
                    Style="{StaticResource HyperlinkBtn}"
                    Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="17"
                        RequestedTheme="Dark"
                        Text="&#59152;" />
                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="Click" SourceObject="{Binding ElementName=button2}">
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource PlaylistsFlyout}" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </Button>
                <Interactivity:Interaction.Behaviors>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="True">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource SystemControlBackgroundAccentBrush}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource SystemControlBackgroundAccentBrush}" />
                        <Media:ControlStoryboardAction>
                            <Media:ControlStoryboardAction.Storyboard>
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="ButtonsStack"
                                        Storyboard.TargetProperty="Opacity"
                                        From="0"
                                        To="1"
                                        Duration="0:0:0.3" />
                                </Storyboard>
                            </Media:ControlStoryboardAction.Storyboard>
                        </Media:ControlStoryboardAction>
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="False">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Collapsed" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource ThemeForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource ThemeForeground}" />
                    </Core:DataTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Grid>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="MediafileTemplate" x:DataType="models:Mediafile">
        <Grid
            x:Name="MainGrid"
            Height="50"
            Margin="-12,0,-12,0"
            Padding="10,0,40,0"
            Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock
                x:Name="titleTxt"
                Grid.Column="1"
                Width="10000"
                Margin="0,0,5,0"
                VerticalAlignment="Center"
                Extensions:TextBlockExtensions.TextType="{Binding Source={StaticResource Core}, Path=SettingsVm.UiTextType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                x:Phase="0"
                FontSize="14"
                Text="{x:Bind Title}"
                TextTrimming="Clip"
                TextWrapping="NoWrap" />
            <TextBlock
                x:Name="durationTxt"
                Grid.Column="4"
                Width="50"
                Margin="15,0,0,0"
                VerticalAlignment="Center"
                Extensions:TextBlockExtensions.TextType="{Binding Source={StaticResource Core}, Path=SettingsVm.UiTextType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                x:Phase="3"
                FontSize="13"
                Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                Tag="Numerical"
                Text="{x:Bind Length}"
                Visibility="Visible" />
            <Border
                Grid.ColumnSpan="9"
                Height="50"
                Background="Transparent"
                ToolTipService.ToolTip="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content.Title}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="DoubleTapped">
                        <Core:InvokeCommandAction Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}" />
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="RightTapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource Flyout}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Tapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Core:CallMethodAction MethodName="PlayOnTap" TargetObject="{StaticResource LibVM}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Holding">
                        <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource Flyout}" />
                    </Core:EventTriggerBehavior>
                    <Behaviours:InputSpecificEventTriggerBehaviour EventName="PointerEntered" InputType="Mouse">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                    </Behaviours:InputSpecificEventTriggerBehaviour>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected}"
                        ComparisonCondition="Equal"
                        Value="False">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Collapsed" />
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="{Binding ElementName=FavoriteButton, Path=IsChecked, Converter={StaticResource BoolToVisibility}}" />
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected}"
                        ComparisonCondition="Equal"
                        Value="True">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="Visible" />
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding ElementName=FavoriteButton, Path=IsChecked}"
                        ComparisonCondition="Equal"
                        Value="True">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="Visible" />
                    </Core:DataTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Border>
            <Button
                x:Name="artistBtn"
                Grid.Column="2"
                Margin="15,0,0,0"
                VerticalAlignment="Center"
                x:Phase="1"
                Background="Transparent"
                Command="{Binding Source={StaticResource Core}, Path=NavigateToArtistPageCommand}"
                CommandParameter="{x:Bind LeadArtist}"
                Content="{x:Bind LeadArtist}"
                FontSize="13"
                Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                Style="{StaticResource HyperlinkBtn}"
                Visibility="Visible" />
            <Button
                x:Name="albumBtn"
                Grid.Column="3"
                Margin="15,0,0,0"
                VerticalAlignment="Center"
                x:Phase="2"
                Background="Transparent"
                Command="{Binding Source={StaticResource Core}, Path=NavigateToAlbumPageCommand}"
                CommandParameter="{x:Bind Album}"
                Content="{x:Bind Album}"
                FontSize="13"
                Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                Style="{StaticResource HyperlinkBtn}"
                Visibility="Visible" />
            <ToggleButton
                Name="FavoriteButton"
                Width="40"
                Height="40"
                Margin="0,0,0,0"
                HorizontalAlignment="Left"
                HorizontalContentAlignment="Center"
                VerticalContentAlignment="Center"
                Background="Transparent"
                Command="{Binding Source={StaticResource LibVM}, Path=AddToFavoritesCommand}"
                CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                Content="&#xEB51;"
                Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                IsChecked="{Binding Path=IsFavorite, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                Style="{StaticResource FavoriteButtonStyle}"
                Visibility="Collapsed" />
            <StackPanel
                x:Name="ButtonsStack"
                Grid.Column="1"
                Width="100"
                Height="50"
                HorizontalAlignment="Right"
                VerticalAlignment="Stretch"
                Background="{Binding ElementName=MainGrid, Path=Background}"
                Orientation="Horizontal"
                Visibility="Collapsed">
                <Button
                    x:Name="playBtn"
                    Grid.Column="1"
                    Width="50"
                    Height="50"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Content="&#xE102;"
                    DataContext="{Binding ElementName=LayoutRoot, Path=DataContext}"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="18"
                    Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                    Style="{StaticResource HyperlinkBtn}"
                    ToolTipService.ToolTip="Play"
                    Visibility="Visible" />
                <Button
                    x:Name="button2"
                    Grid.Column="2"
                    Width="50"
                    Height="50"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    Content="&#xE710;"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="18"
                    Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                    IsDoubleTapEnabled="False"
                    Style="{StaticResource HyperlinkBtn}"
                    ToolTipService.ToolTip="Add this song to playlist."
                    Visibility="{Binding Path=IsPlaylistSong, Converter={StaticResource TrueToFalse}}">

                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="Click" SourceObject="{Binding ElementName=button2}">
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource PlaylistsFlyout}" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </Button>
                <Button
                    x:Uid="listItemDeleteBtn"
                    Grid.Column="2"
                    Width="50"
                    Height="50"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    Command="{Binding Source={StaticResource PlaylistVM}, Path=DeleteCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Content="&#xE74D;"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="18"
                    IsDoubleTapEnabled="False"
                    Style="{StaticResource HyperlinkBtn}"
                    ToolTipService.ToolTip=""
                    Visibility="{Binding Path=IsPlaylistSong}" />
            </StackPanel>
            <Interactivity:Interaction.Behaviors>
                <Core:DataTriggerBehavior Binding="{Binding State, Converter={StaticResource PlayerStateToBool}}" Value="True">
                    <Media:ControlStoryboardAction>
                        <Media:ControlStoryboardAction.Storyboard>
                            <Storyboard
                                x:Name="myStoryboard"
                                AutoReverse="True"
                                RepeatBehavior="Forever">
                                <ColorAnimation
                                    Storyboard.TargetName="MainGrid"
                                    Storyboard.TargetProperty="(Grid.Background).(SolidColorBrush.Color)"
                                    From="{Binding Source={ThemeResource SystemAccentColor1}, Path=Color}"
                                    To="DeepSkyBlue"
                                    Duration="0:0:6" />
                            </Storyboard>
                        </Media:ControlStoryboardAction.Storyboard>
                    </Media:ControlStoryboardAction>
                    <Core:ChangePropertyAction
                        PropertyName="Foreground"
                        TargetObject="{Binding ElementName=titleTxt}"
                        Value="White" />
                </Core:DataTriggerBehavior>
                <Core:DataTriggerBehavior Binding="{Binding State, Converter={StaticResource PlayerStateToBool}}" Value="False">
                    <Core:ChangePropertyAction
                        PropertyName="Background"
                        TargetObject="{Binding ElementName=MainGrid}"
                        Value="Transparent" />
                    <Core:ChangePropertyAction
                        PropertyName="Foreground"
                        TargetObject="{Binding ElementName=titleTxt}"
                        Value="Black" />
                </Core:DataTriggerBehavior>
                <Core:EventTriggerBehavior EventName="PointerExited">
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=ButtonsStack}"
                        Value="{Binding Path=IsSelected, Converter={StaticResource BoolToVisibility}}" />
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=FavoriteButton}"
                        Value="{Binding ElementName=FavoriteButton, Path=IsChecked, Converter={StaticResource BoolToVisibility}}" />
                </Core:EventTriggerBehavior>
            </Interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="MediafileMobileTemplate" x:DataType="models:Mediafile">
        <Grid
            x:Name="MainGrid"
            Margin="-12,0,0,0"
            Padding="20,15,15,15"
            Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <TextBlock
                x:Name="titleTxt"
                Grid.Column="1"
                Margin="0,0,0,0"
                VerticalAlignment="Center"
                Foreground="{Binding ElementName=Title, Path=Foreground}"
                Text="{Binding Path=Title}"
                TextTrimming="CharacterEllipsis" />
            <TextBlock
                x:Name="artistTxt"
                Grid.Row="1"
                Grid.Column="1"
                Margin="0,0,0,0"
                VerticalAlignment="Center"
                FontSize="12"
                Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                Text="{Binding Path=LeadArtist}"
                TextTrimming="CharacterEllipsis" />
            <TextBlock
                x:Name="Duration"
                Grid.RowSpan="2"
                Grid.Column="3"
                Margin="10,0,10,0"
                VerticalAlignment="Center"
                FontSize="13"
                Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                Text="{Binding Path=Length}"
                TextTrimming="CharacterEllipsis" />

            <Border
                Grid.RowSpan="4"
                Grid.ColumnSpan="9"
                Margin="-10"
                Background="Transparent"
                Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                ToolTipService.ToolTip="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content.Title}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="DoubleTapped">
                        <Core:InvokeCommandAction Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}" CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}" />
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="RightTapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource Flyout}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Tapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Core:CallMethodAction MethodName="PlayOnTap" TargetObject="{StaticResource LibVM}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Holding">
                        <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource Flyout}" />
                    </Core:EventTriggerBehavior>
                    <Behaviours:InputSpecificEventTriggerBehaviour EventName="PointerEntered" InputType="Mouse">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                    </Behaviours:InputSpecificEventTriggerBehaviour>
                    <Core:EventTriggerBehavior EventName="PointerExited">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="{Binding Path=IsSelected, Converter={StaticResource BoolToVisibility}}" />
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="{Binding ElementName=FavoriteButton, Path=IsChecked, Converter={StaticResource BoolToVisibility}}" />
                    </Core:EventTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected}"
                        ComparisonCondition="Equal"
                        Value="False">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Collapsed" />
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior Binding="{Binding ElementName=FavoriteButton, Path=IsChecked}">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=FavoriteButton}"
                            Value="Visible" />
                    </Core:DataTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Border>

            <StackPanel
                x:Name="ButtonsStack"
                Grid.RowSpan="4"
                Grid.Column="2"
                HorizontalAlignment="Right"
                VerticalAlignment="Stretch"
                Background="{Binding ElementName=MainGrid, Path=Background}"
                Orientation="Horizontal"
                Visibility="Collapsed">
                <ToggleButton
                    Name="FavoriteButton"
                    Margin="0,0,10,0"
                    VerticalAlignment="Center"
                    Command="{Binding Source={StaticResource LibVM}, Path=AddToFavoritesCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Content="&#xEB51;"
                    DataContext="{Binding ElementName=ContentPresenter, Path=Content}"
                    FontSize="18"
                    Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                    IsChecked="{Binding Path=IsFavorite, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                    Style="{StaticResource FavoriteButtonStyle}"
                    Visibility="Visible">
                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="PointerEntered">
                            <Core:ChangePropertyAction
                                PropertyName="Visibility"
                                TargetObject="{Binding ElementName=FavoriteButton}"
                                Value="Visible" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </ToggleButton>
                <Button
                    x:Name="button2"
                    x:Uid="listItemAddBtn"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    Content="&#xE710;"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="18"
                    Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                    IsDoubleTapEnabled="False"
                    Style="{StaticResource HyperlinkBtn}"
                    ToolTipService.ToolTip="Add this song to playlist."
                    Visibility="{Binding Path=IsPlaylistSong, Converter={StaticResource TrueToFalse}}">

                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="Click" SourceObject="{Binding ElementName=button2}">
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource PlaylistsFlyout}" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </Button>
                <Button
                    x:Uid="listItemDeleteBtn"
                    VerticalAlignment="Stretch"
                    Background="Transparent"
                    Command="{Binding Source={StaticResource PlaylistVM}, Path=DeleteCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Content="&#xE74D;"
                    FontFamily="Segoe MDL2 Assets"
                    FontSize="18"
                    Foreground="{Binding ElementName=titleTxt, Path=Foreground}"
                    IsDoubleTapEnabled="False"
                    Style="{StaticResource HyperlinkBtn}"
                    ToolTipService.ToolTip=""
                    Visibility="{Binding Path=IsPlaylistSong}" />
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="PointerEntered">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="PointerExited">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="{Binding Path=IsSelected, Converter={StaticResource BoolToVisibility}}" />
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </StackPanel>
            <Interactivity:Interaction.Behaviors>
                <Core:DataTriggerBehavior Binding="{Binding State, Converter={StaticResource PlayerStateToBool}}" Value="True">
                    <Media:ControlStoryboardAction>
                        <Media:ControlStoryboardAction.Storyboard>
                            <Storyboard
                                x:Name="myStoryboard"
                                AutoReverse="True"
                                RepeatBehavior="Forever">
                                <ColorAnimation
                                    Storyboard.TargetName="MainGrid"
                                    Storyboard.TargetProperty="(Grid.Background).(SolidColorBrush.Color)"
                                    From="{Binding Source={ThemeResource SystemAccentColor1}, Path=Color}"
                                    To="DeepSkyBlue"
                                    Duration="0:0:6" />
                            </Storyboard>
                        </Media:ControlStoryboardAction.Storyboard>
                    </Media:ControlStoryboardAction>
                    <Core:ChangePropertyAction
                        PropertyName="Foreground"
                        TargetObject="{Binding ElementName=titleTxt}"
                        Value="White" />
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=FavoriteButton}"
                        Value="Visible" />
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=ButtonsStack}"
                        Value="Visible" />
                </Core:DataTriggerBehavior>
                <Core:DataTriggerBehavior Binding="{Binding State, Converter={StaticResource PlayerStateToBool}}" Value="False">
                    <Core:ChangePropertyAction
                        PropertyName="Background"
                        TargetObject="{Binding ElementName=MainGrid}"
                        Value="Transparent" />
                    <Core:ChangePropertyAction
                        PropertyName="Foreground"
                        TargetObject="{Binding ElementName=titleTxt}"
                        Value="Black" />
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=ButtonsStack}"
                        Value="{Binding Path=IsSelected, Converter={StaticResource BoolToVisibility}}" />
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=FavoriteButton}"
                        Value="{Binding ElementName=FavoriteButton, Path=IsChecked, Converter={StaticResource BoolToVisibility}}" />
                </Core:DataTriggerBehavior>
                <Core:EventTriggerBehavior EventName="PointerExited">
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=ButtonsStack}"
                        Value="{Binding Path=IsSelected, Converter={StaticResource BoolToVisibility}}" />
                    <Core:ChangePropertyAction
                        PropertyName="Visibility"
                        TargetObject="{Binding ElementName=FavoriteButton}"
                        Value="{Binding ElementName=FavoriteButton, Path=IsChecked, Converter={StaticResource BoolToVisibility}}" />
                </Core:EventTriggerBehavior>
            </Interactivity:Interaction.Behaviors>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ArtistTemplate" x:DataType="models:Artist">
        <Grid
            x:Name="LayoutRoot"
            Width="160"
            Height="200"
            Padding="0,0,0,5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Border
                Width="150"
                Height="150"
                Background="#ccdbdbdb"
                CornerRadius="100">
                <Grid
                    x:Name="artistImageGrid"
                    CornerRadius="100"
                    Opacity="0">
                    <Grid.Background>
                        <ImageBrush x:Name="ArtistPicture" Stretch="Uniform">
                            <ImageBrush.ImageSource>
                                <BitmapImage
                                    DecodePixelHeight="150"
                                    DecodePixelType="Logical"
                                    DecodePixelWidth="150"
                                    UriSource="{Binding Picture, UpdateSourceTrigger=PropertyChanged}" />
                            </ImageBrush.ImageSource>
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="ImageOpened">
                                    <Media:ControlStoryboardAction>
                                        <Media:ControlStoryboardAction.Storyboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="artistImageGrid"
                                                    Storyboard.TargetProperty="Opacity"
                                                    From="0"
                                                    To="1"
                                                    Duration="0:0:0.8" />
                                            </Storyboard>
                                        </Media:ControlStoryboardAction.Storyboard>
                                    </Media:ControlStoryboardAction>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </ImageBrush>
                    </Grid.Background>
                    <FontIcon
                        x:Name="PlaceHolder"
                        Width="150"
                        Height="150"
                        x:Phase="2"
                        FontSize="52"
                        Foreground="{ThemeResource ThemeForeground}"
                        Glyph="&#xE13D;"
                        Visibility="{x:Bind Path=Picture, Mode=OneWay, Converter={StaticResource BoolToVisibility}}" />
                    <!--<Grid CornerRadius="100" Background="{Binding Path=PictureColor, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource HexToColor}}" />-->
                </Grid>
            </Border>
            <TextBlock
                x:Name="artistName"
                Grid.Row="1"
                Margin="5,10,5,0"
                HorizontalAlignment="Center"
                x:Phase="0"
                FontSize="16"
                FontWeight="SemiBold"
                Foreground="{ThemeResource TextBrush}"
                MaxLines="2"
                Text="{x:Bind Name, FallbackValue=25}"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap" />
            <Border
                Grid.RowSpan="4"
                Height="200"
                Background="Transparent"
                ToolTipService.ToolTip="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content.Name}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="RightTapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Holding">
                        <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Border>
            <Grid
                x:Name="ButtonsStack"
                Grid.Row="0"
                Width="150"
                Margin="0,0,0,0"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                CornerRadius="100"
                Opacity="0"
                Visibility="Collapsed">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Offset="0" Color="Transparent" />
                        <GradientStop Offset="0.95" Color="{Binding Path=PictureColor}" />
                    </LinearGradientBrush>
                </Grid.Background>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <AppBarButton
                    Width="40"
                    Height="40"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    BorderBrush="WhiteSmoke"
                    Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Icon="Play"
                    Style="{StaticResource CustomAppBarButtonStyle}">
                    <AppBarButton.Background>
                        <SolidColorBrush Color="{Binding Path=PictureColor, UpdateSourceTrigger=PropertyChanged}" />
                    </AppBarButton.Background>
                </AppBarButton>
                <AppBarButton
                    x:Name="button2"
                    Grid.Column="1"
                    Width="40"
                    Height="40"
                    Margin="5,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    BorderBrush="WhiteSmoke"
                    Icon="Add"
                    Style="{StaticResource CustomAppBarButtonStyle}"
                    Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                    <AppBarButton.Background>
                        <SolidColorBrush Color="{Binding Path=PictureColor, UpdateSourceTrigger=PropertyChanged}" />
                    </AppBarButton.Background>
                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="Click" SourceObject="{Binding ElementName=button2}">
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource PlaylistsFlyout}" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </AppBarButton>
                <Interactivity:Interaction.Behaviors>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="True">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource SystemAccentForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource SystemAccentForeground}" />
                        <Media:ControlStoryboardAction>
                            <Media:ControlStoryboardAction.Storyboard>
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="ButtonsStack"
                                        Storyboard.TargetProperty="Opacity"
                                        From="0"
                                        To="1"
                                        Duration="0:0:0.3" />
                                </Storyboard>
                            </Media:ControlStoryboardAction.Storyboard>
                        </Media:ControlStoryboardAction>
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="False">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Collapsed" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource ThemeForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource ThemeForeground}" />
                    </Core:DataTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Grid>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ArtistMobileTemplate" x:DataType="models:Artist">
        <Grid
            x:Name="LayoutRoot"
            Width="120"
            Height="180">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Border
                Width="110"
                Height="110"
                Background="#ccdbdbdb"
                CornerRadius="100">
                <Grid
                    x:Name="artistImageGrid"
                    CornerRadius="100"
                    Opacity="0">
                    <Grid.Background>
                        <ImageBrush x:Name="ArtistPicture" Stretch="Uniform">
                            <ImageBrush.ImageSource>
                                <BitmapImage
                                    DecodePixelHeight="150"
                                    DecodePixelType="Logical"
                                    DecodePixelWidth="150"
                                    UriSource="{Binding Picture, UpdateSourceTrigger=PropertyChanged}" />
                            </ImageBrush.ImageSource>
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="ImageOpened">
                                    <Media:ControlStoryboardAction>
                                        <Media:ControlStoryboardAction.Storyboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetName="artistImageGrid"
                                                    Storyboard.TargetProperty="Opacity"
                                                    From="0"
                                                    To="1"
                                                    Duration="0:0:0.8" />
                                            </Storyboard>
                                        </Media:ControlStoryboardAction.Storyboard>
                                    </Media:ControlStoryboardAction>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </ImageBrush>
                    </Grid.Background>
                    <FontIcon
                        x:Name="PlaceHolder"
                        Width="110"
                        Height="110"
                        FontSize="32"
                        Foreground="{ThemeResource ThemeForeground}"
                        Glyph="&#xE13D;"
                        Visibility="{Binding Path=Picture, Mode=OneWay, Converter={StaticResource BoolToVisibility}}" />
                    <!--<Grid CornerRadius="100" Background="{Binding Path=PictureColor, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource HexToColor}}" />-->
                </Grid>
            </Border>
            <TextBlock
                x:Name="artistName"
                Grid.Row="1"
                Margin="5,10,5,0"
                HorizontalAlignment="Center"
                x:Phase="0"
                FontSize="16"
                FontWeight="SemiBold"
                Foreground="{ThemeResource TextBrush}"
                MaxLines="2"
                Text="{x:Bind Name, FallbackValue=25}"
                TextAlignment="Center"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap" />
            <Border
                Grid.RowSpan="4"
                Height="180"
                Background="Transparent"
                ToolTipService.ToolTip="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content.Name}">
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="RightTapped">
                        <Core:EventTriggerBehavior.Actions>
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                        </Core:EventTriggerBehavior.Actions>
                    </Core:EventTriggerBehavior>
                    <Core:EventTriggerBehavior EventName="Holding">
                        <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource AlbumArtistFlyout}" />
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Border>
            <Grid
                x:Name="ButtonsStack"
                Grid.Row="0"
                Width="113"
                Height="113"
                Margin="0,0,0,0"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                CornerRadius="100"
                Opacity="0"
                Visibility="Collapsed">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                        <GradientStop Offset="0" Color="Transparent" />
                        <GradientStop Offset="0.95" Color="{Binding Path=PictureColor}" />
                    </LinearGradientBrush>
                </Grid.Background>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <AppBarButton
                    Width="40"
                    Height="40"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    BorderBrush="WhiteSmoke"
                    Command="{Binding Source={StaticResource LibVM}, Path=PlayCommand}"
                    CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content}"
                    Icon="Play"
                    Style="{StaticResource CustomAppBarButtonStyle}">
                    <AppBarButton.Background>
                        <SolidColorBrush Color="{Binding Path=PictureColor, UpdateSourceTrigger=PropertyChanged}" />
                    </AppBarButton.Background>
                </AppBarButton>
                <AppBarButton
                    x:Name="button2"
                    Grid.Column="1"
                    Width="40"
                    Height="40"
                    Margin="5,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    BorderBrush="WhiteSmoke"
                    Icon="Add"
                    Style="{StaticResource CustomAppBarButtonStyle}"
                    Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}">
                    <AppBarButton.Background>
                        <SolidColorBrush Color="{Binding Path=PictureColor, UpdateSourceTrigger=PropertyChanged}" />
                    </AppBarButton.Background>
                    <Interactivity:Interaction.Behaviors>
                        <Core:EventTriggerBehavior EventName="Click" SourceObject="{Binding ElementName=button2}">
                            <Behaviours:OpenMenuFlyoutAction Parameter="{StaticResource PlaylistsFlyout}" />
                        </Core:EventTriggerBehavior>
                    </Interactivity:Interaction.Behaviors>
                </AppBarButton>
                <Interactivity:Interaction.Behaviors>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="True">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Visible" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource SystemAccentForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource SystemAccentForeground}" />
                        <Media:ControlStoryboardAction>
                            <Media:ControlStoryboardAction.Storyboard>
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="ButtonsStack"
                                        Storyboard.TargetProperty="Opacity"
                                        From="0"
                                        To="1"
                                        Duration="0:0:0.3" />
                                </Storyboard>
                            </Media:ControlStoryboardAction.Storyboard>
                        </Media:ControlStoryboardAction>
                    </Core:DataTriggerBehavior>
                    <Core:DataTriggerBehavior
                        Binding="{Binding Path=IsSelected, UpdateSourceTrigger=PropertyChanged}"
                        ComparisonCondition="Equal"
                        Value="False">
                        <Core:ChangePropertyAction
                            PropertyName="Visibility"
                            TargetObject="{Binding ElementName=ButtonsStack}"
                            Value="Collapsed" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumTitle}"
                            Value="{StaticResource ThemeForeground}" />
                        <Core:ChangePropertyAction
                            PropertyName="Foreground"
                            TargetObject="{Binding ElementName=albumArtist}"
                            Value="{StaticResource ThemeForeground}" />
                    </Core:DataTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </Grid>
        </Grid>
    </DataTemplate>
</ResourceDictionary>